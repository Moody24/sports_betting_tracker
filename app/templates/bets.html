{% extends "base.html" %}
{% block content %}
<h2>Manage Your Bets</h2>

{% if current_user.is_authenticated %}
    <h3>Place a New Bet</h3>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div>
            <label for="match_id">Match:</label>
            {{ form.match_id(class="form-control") }}
        </div>
        <div>
            <label for="bet_amount">Bet Amount:</label>
            {{ form.bet_amount(class="form-control") }}
        </div>
        <div>
            <label for="outcome">Outcome:</label>
            {{ form.outcome(class="form-control") }}
        </div>
        <button type="submit" class="btn">Place Bet</button>
    </form>

    <h3>Your Bets</h3>
    {% if bets %}
        <table>
            <thead>
                <tr>
                    <th>Match</th>
                    <th>Bet Amount</th>
                    <th>Outcome</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for bet in bets %}
                <tr>
                    <td>{{ bet.match.team_a }} vs {{ bet.match.team_b }}</td>
                    <td>${{ bet.bet_amount }}</td>
                    <td>{{ bet.outcome }}</td>
                    <td>
                        <a href="{{ url_for('main.edit_bet', bet_id=bet.id) }}">Edit</a> |
                        <form method="POST" action="{{ url_for('main.delete_bet', bet_id=bet.id) }}" style="display:inline;">
                            <button type="submit" onclick="return confirm('Are you sure you want to delete this bet?')">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>You haven't placed any bets yet. Start by placing one above!</p>
    {% endif %}
{% else %}
    <p>Please <a href="{{ url_for('main.login') }}">log in</a> to manage your bets.</p>
{% endif %}
{% endblock %}
